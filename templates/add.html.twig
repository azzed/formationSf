{% extends "base.html.twig" %}
{% block body %}
    <div class="container">
        <div class="section">
            <div class="row">
                <div class="col s12 m12">
                    <h1>Ajout de livre</h1> 
                    {% include "form.html.twig" %}
                     <button class="addKeyword btn waves-effect waves-light" >
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="btn waves-effect waves-light" type="submit" name="action">Ajouter
                        <i class="material-icons right"></i>
                    </button><br>
                    {{form_end(form)}}
                    <a href="{{path("home")}}">Accueil </a>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascript %}
{{ parent() }}
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script>
    $(document).ready(function(){
        var $container = $('#book_keywords');
        var index = $container.find(':input').length;
        if(index == 0){
            addKeyword($container);
        }
        $('.addKeyword').click(function(e){
            e.preventDefault();
            addKeyword($container);
        });
        function addKeyword($container){
            var template = $container.attr('data-prototype').replace(/__name__label__/g, 'Mot clé n°' + (index + 1)).replace(/__name__/g, index);
            var $prototype = $(template);
            $container.append($prototype);
            index ++;
        };
    
    });

</script>
{% endblock %}